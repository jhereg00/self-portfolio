!function t(i,e,s){function n(r,a){if(!e[r]){if(!i[r]){var h="function"==typeof require&&require;if(!a&&h)return h(r,!0);if(o)return o(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var c=e[r]={exports:{}};i[r][0].call(c.exports,function(t){var e=i[r][1][t];return n(e?e:t)},c,c.exports,t,i,e,s)}return e[r].exports}for(var o="function"==typeof require&&require,r=0;r<s.length;r++)n(s[r]);return n}({1:[function(t,i,e){var s=[720,960,1200,1680],n=t("lib/getWindowSize"),o=function(){for(var t=n.width(),i=0;i<s.length;i++)if(s[i]>t)return i;return s.length};i.exports=o},{"lib/getWindowSize":5}],2:[function(t,i,e){var s={easeInOut:function(t,i,e){return.5>e?t+i*(2*e*e):t+i*(-2*(e-1)*(e-1)+1)},easeIn:function(t,i,e){return t+i*e*e},easeInCubic:function(t,i,e){return t+i*(e*e*e)},easeOut:function(t,i,e){return t+i*(-1*(e-1)*(e-1)+1)},easeOutCubic:function(t,i,e){return t+i*((e-1)*(e-1)*(e-1)+1)},linear:function(t,i,e){return t+i*e}};i.exports=s},{}],3:[function(t,i,e){i.exports=function(t){for(var i=t.offsetLeft,e=t.offsetTop;t=t.offsetParent;)i+=t.offsetLeft,e+=t.offsetTop;return{left:i,top:e}}},{}],4:[function(t,i,e){i.exports=function(t){return window.scrollY!==t?function(){return window.scrollY}:function(){return document.documentElement.scrollTop}}()},{}],5:[function(t,i,e){var s=function(){return window.innerHeight||document.documentElement.clientHeight},n=function(){return window.innerWidth||document.documentElement.clientWidth};i.exports={width:n,height:s}},{}],6:[function(t,i,e){window.requestAnimationFrame||(window.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}()),function(e,s,n){function o(){if(a){var t=(new Date).getTime(),i=r();e.body.offsetWidth===h&&e.body.offsetHeight===l||(h=e.body.offsetWidth,l=e.body.offsetHeight,y&&s.clearTimeout(y),y=s.setTimeout(function(){x("resize",t)},f)),c!==i&&(c=i,x("scroll",t)),x("tick",t),u=t,requestAnimationFrame(o)}}var r=t("lib/getScrollPos"),a=!0,h=e.body.offsetWidth,l=e.body.offsetHeight,c=-1,u=(new Date).getTime(),f=500,g={resize:[],scroll:[],tick:[]},d=function(t,i){return-1===g[t].indexOf(i)?(g[t].push(i),b(),!0):!1},m=function(t){return d("scroll",t)},v=function(t){return d("resize",t)},p=function(t){return d("tick",t)},w=function(t){for(var i=["resize","scroll","tick"],e=!1,s=0;s<i.length;s++){var n=g[i[s]].indexOf(t);if(-1!==n){g[i[s]].splice(n,1),e=!0;break}}for(var s=0;s<i.length&&!g[i[s]].length;s++)s===i.length-1&&S();return e},x=function(t,i){for(var e=0,n=g[t].length;n>e;e++)g[t][e]&&g[t][e].call(s,i)},b=function(){a=!0,o()},S=function(){a=!1},E=function(){h=-1,c=-1},y=null;i.exports={addScrollFunction:m,addResizeFunction:v,addFunction:p,removeFunction:w,start:b,stop:S,force:E}}(document,window)},{"lib/getScrollPos":4}],7:[function(t,i,e){var s=t("lib/getPageOffset"),n=t("lib/getWindowSize"),o=t("lib/getScrollPos"),r=t("lib/loop"),a=function h(t,i){if(!this instanceof h)return new h(t);var e=this;this.element=t,this.measure(),i&&i(e.getPercentage()),this.onResize=function(){e.measure()},i&&(this.onScroll=function(){i.apply(e,[e.getPercentage()])}),this.enable()};a.prototype={measure:function(){var t=s(this.element);this.top=t.top-n.height(),this.bottom=t.top+this.element.offsetHeight,this.height=this.bottom-this.top},getPercentage:function(){var t=o(),i=(t-this.top)/this.height;return i},disable:function(){r.removeFunction(this.onResize),this.onScroll&&r.removeFunction(this.onScroll)},enable:function(){r.addResizeFunction(this.onResize),this.onScroll&&r.addScrollFunction(this.onScroll)},destroy:function(){this.disable(),delete this}},i.exports=a},{"lib/getPageOffset":3,"lib/getScrollPos":4,"lib/getWindowSize":5,"lib/loop":6}],8:[function(t,i,e){var s=["transform","webkitTransform","mozTransform","msTransform"],n=function(t,i){for(var e=0,n=s.length;n>e;e++)t.style[s[e]]=i};i.exports=n},{}],9:[function(t,i,e){var s=t("objects/halftone"),n=t("lib/scrollController"),o=t("lib/getScrollPos"),r=t("lib/ease"),a={fade:12,maxRadius:16},h={fade:0,imageSizing:"contain",inEaseStart:.1,inEaseEnd:.5,outEaseStart:.75,cornering:8},l={fade:0,inEaseStart:-.4,inEaseEnd:.8,inEaseFn:r.linear,outEaseStart:.6,outEaseEnd:1.2},c=function(t){this.element=t;var i=t.querySelector(".article__header");i&&(this.header=new s(i,a),this.header.animIn(1200));var e=t.querySelectorAll(".halftone");this.halftones=[];for(var o=0,r=e.length;r>o;o++){var c=new s(e[o],h);this.halftones.push(c)}var u=t.querySelector(".relateds");u&&this.halftones.push(new s(u,l));this.scrollController=new n(this.element)};c.prototype={destroy:function(t){function i(){window.scrollTo(0,e)}var e=o()-this.element.offsetHeight;this.header&&this.header.destroy();for(var s=0,n=this.halftones.length;n>s;s++)this.halftones[s].destroy();if(this.scrollController.destroy(),t){i(),requestAnimationFrame(i)}this.element.remove()}},window.article=new c(document.querySelector(".article"))},{"lib/ease":2,"lib/getScrollPos":4,"lib/scrollController":7,"objects/halftone":10}],10:[function(t,i,e){var s=t("lib/ease"),n=t("lib/scrollController"),o=t("lib/setTransform"),r=t("lib/getWindowSize"),a=t("lib/breakpoints"),h=t("lib/loop"),l={fade:4,maxRadius:12,inEaseFn:s.easeOut,inEaseStart:.2,inEaseEnd:.8,outEaseFn:s.linear,outEaseStart:.6,outEaseEnd:1.1,fixed:!1,imageSizing:"cover",cornering:0,control:"scroll",fill:null},c=2,u=function(t,i,e,n){this.gridX=t,this.gridY=i,this.maxRadius=e,this.radius=e,this.parent=n,this.percentage=(this.gridX+this.gridY)/(this.parent.columns+this.parent.rows),this.x=this.gridX*this.parent.settings.maxRadius,this.y=this.gridY*this.parent.settings.maxRadius,this.parent.settings.fade&&(this.y+=this.parent.settings.maxRadius),this.parent.settings.cornering&&this.gridX+this.gridY<=this.parent.settings.cornering+1?(this.maxRadius=s.linear(.33,.66,(this.gridX+this.gridY)/(this.parent.settings.cornering+1))*this.maxRadius,this.radius=this.maxRadius):this.parent.settings.cornering&&-1*(this.gridX+this.gridY-(this.parent.columns+this.parent.rows-2))<=this.parent.settings.cornering+1&&(this.maxRadius=s.linear(.33,.66,-1*(this.gridX+this.gridY-(this.parent.columns+this.parent.rows-2))/(this.parent.settings.cornering+1))*this.maxRadius,this.radius=this.maxRadius)};u.prototype={draw:function(t){t.moveTo(this.x,this.y-this.radius),t.arc(this.x,this.y,this.radius,0,2*Math.PI,!1)},setRadiusByPercentage:function(t){this.radius=Math.max(0,Math.min(this.maxRadius,t*this.maxRadius))}};var f=function(t,i){this.element=t,this.settings={},i=i||{};for(var e in l)this.settings[e]=void 0!==i[e]?i[e]:l[e];var s=getComputedStyle(this.element);"static"===s.position&&(this.element.style.position="relative"),this.fill=this.settings.fill||s.backgroundColor,s.backgroundImage&&"none"!==s.backgroundImage&&(this.image=new Image,this.image.src=s.backgroundImage.match(/\((?:'|")?(.+?)(?:'|")?\)/)[1]),this.settings.fill||(this.element.style.background="none");var n=this;this.onResize=function(){n.createCanvas()},this.onScroll=function(t){n.draw(t)},this.init()};f.prototype={draw:function(t){if(!this.canvas||t<this.settings.inEaseStart||t>this.settings.outEaseEnd)return!1;this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.save(),this.ctx.beginPath();var i=(t-this.settings.inEaseStart)/(this.settings.inEaseEnd-this.settings.inEaseStart);i=1>i?this.settings.inEaseFn(-1,3,i):2;var e=(t-this.settings.outEaseStart)/(this.settings.outEaseEnd-this.settings.outEaseStart);e=e>0?this.settings.outEaseFn(2,-3,e):2;for(var s=0,n=this.dots.length;n>s;s++){var o=i-this.dots[s].percentage,r=e-(1-this.dots[s].percentage);this.dots[s].setRadiusByPercentage(Math.min(o,r)),this.dots[s].draw(this.ctx)}this.ctx.fill(),this.image&&this.imageOffsets&&(this.ctx.globalCompositeOperation="source-atop",this.ctx.drawImage(this.image,this.imageOffsets.x,this.imageOffsets.y,this.imageOffsets.width,this.imageOffsets.height)),this.ctx.restore()},createCanvas:function(){if(this.canvas&&this.canvas.remove(),this.canvas=document.createElement("canvas"),this.canvas.setAttribute("class","canvas-halftone"),!this.settings.fixed||a()<c){var t=Math.floor(this.element.offsetWidth/this.settings.maxRadius),i=Math.floor(this.element.offsetHeight/this.settings.maxRadius);this.settings.fade?(t+=2,i+=2*this.settings.fade+2):(t%2===0&&(t+=1),i%2===0&&(i+=1))}else{var t=Math.floor(r.width()/this.settings.maxRadius)+2,i=Math.floor(r.height()/this.settings.maxRadius)+2*this.settings.fade+2;o(this.element,"none"),o(this.canvas,"none"),this.canvas.style.position="fixed",this.canvas.style.top=this.settings.fade*this.settings.maxRadius*-1+"px",this.canvas.style.left=0}this.canvas.width=(t-1)*this.settings.maxRadius,this.canvas.height=(this.settings.fade?i+1:i-1)*this.settings.maxRadius,this.ctx=this.canvas.getContext("2d"),this.ctx.fillStyle=this.fill,this.columns=t,this.rows=i,this.dots=[];for(var e=0;i>e;e++)for(var s=0;t>s;s+=2){var h;if(e<this.settings.fade)h=(e+1)/(this.settings.fade+1)*this.settings.maxRadius;else if(e>=i-this.settings.fade)h=-1*(e+1-i)/(this.settings.fade+1)*this.settings.maxRadius;else{if(!this.settings.fade&&0===e&&0===s&&!this.settings.fixed)continue;if(!this.settings.fade&&0===e&&s===t-1&&!this.settings.fixed)continue;if(!this.settings.fade&&e===i-1&&0===s&&!this.settings.fixed)continue;if(!this.settings.fade&&e===i-1&&s===t-1&&!this.settings.fixed)continue;h=this.settings.maxRadius}this.dots.push(new u(e%2?s+1:s,e,h,this))}if(this.element.children.length?this.element.insertBefore(this.canvas,this.element.children[0]):this.element.appendChild(this.canvas),this.image)if(this.image.complete)this.sizeImage();else{var l=this;this.image.onload=function(){l.sizeImage(),l.draw(l.getPercentageFromScroll())}}a()>=c&&"scroll"===this.settings.control?this.scrollController=new n(this.element,this.onScroll):(this.scrollController&&(this.scrollController.destroy(),this.scrollController=null),this.draw(this.getPercentageFromScroll()))},sizeImage:function(){if(!this.image.width||!this.image.height)return this.imageOffsets=null,!1;var t=this.canvas.width/this.image.width;"cover"===this.settings.imageSizing&&t*this.image.height<this.canvas.height?t=this.canvas.height/this.image.height:"contain"===this.settings.imageSizing&&t*this.image.height>this.canvas.height&&(t=this.canvas.height/this.image.height),this.imageOffsets={x:(this.canvas.width-this.image.width*t)/2,y:(this.canvas.height-this.image.height*t)/2,width:this.image.width*t,height:this.image.height*t}},getPercentageFromScroll:function(){return this.scrollController?this.scrollController.getPercentage():.55},init:function(){this.createCanvas(),h.addResizeFunction(this.onResize)},destroy:function(){this.scrollController&&this.scrollController.destroy(),h.removeFunction(this.onResize),this.canvas.remove(),delete this},anim:function(t,i,e,n,o){this.scrollController&&this.scrollController.disable(),t=t||0,i=isNaN(i)?1:i,e=e||1e3,n=n||s.easeInOut;var r=(new Date).getTime(),a=i-t,l=this,c=!0,u=function(){if(c){var s=(new Date).getTime(),f=(s-r)/e;1>f?l.draw(n(t,a,f)):(c=!1,l.draw(i),l.scrollController&&l.scrollController.enable(),h.removeFunction(u),o&&o())}};h.addFunction(u)},animIn:function(t,i){var e=this.getPercentageFromScroll();return e<this.settings.inEaseStart?!1:void this.anim(this.settings.inEaseStart,e,t,s.easeOut,i)},animOut:function(t,i){var e=this.getPercentageFromScroll();return e<this.settings.inEaseStart?!1:void this.anim(e,this.settings.inEaseStart,t,s.easeIn,i)}},i.exports=f},{"lib/breakpoints":1,"lib/ease":2,"lib/getWindowSize":5,"lib/loop":6,"lib/scrollController":7,"lib/setTransform":8}],11:[function(t,i,e){t("objects/article")},{"objects/article":9}]},{},[11]);
//# sourceMappingURL=scripts.min.js.map
